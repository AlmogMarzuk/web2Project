{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\benfainshtein\\\\Desktop\\\\web2Project\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\benfainshtein\\\\Desktop\\\\web2Project\\\\front\\\\src\\\\components\\\\Register\\\\Register.js\";\nimport { useState, useRef } from 'react';\nimport classes from './Register.module.css';\nvar Register = function Register() {\n  var emailInputRef = useRef();\n  var passwordInputRef = useRef();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    error = _useState2[0],\n    setError = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLogin = _useState4[0],\n    setIsLogin = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  var switchAuthModeHandler = function switchAuthModeHandler() {\n    setIsLogin(function (prevState) {\n      return !prevState;\n    });\n  };\n  var validateEmail = function validateEmail(email) {\n    return email.match(/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n  };\n  var checkBeforeSubmit = function checkBeforeSubmit(Event) {\n    var enteredEmail = emailInputRef.current.value;\n    var enteredPassword = passwordInputRef.current.value;\n    var valid = true;\n    console.log(enteredPassword.length);\n    if (!validateEmail(enteredEmail)) {\n      setError(\"Email is not valid\");\n      valid = false;\n    } else if (enteredPassword == \"\") {\n      setError(\"Fill the password please!\");\n      valid = false;\n    } else if (enteredPassword.length < 8) {\n      setError(\"Password must be with more then 8 characters\");\n      valid = false;\n    }\n    if (valid == true) {\n      submitHandler();\n    }\n  };\n  var submitHandler = function submitHandler() {\n    var enteredEmail = emailInputRef.current.value;\n    var enteredPassword = passwordInputRef.current.value;\n\n    // optional add validation \n\n    setIsLoading(true);\n    var url;\n    url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyC0Xs5gm4eJ2D3G5ia43sC-j7IQTYtj-pQ';\n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      setIsLoading(false);\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.json().then(function (data) {\n          var errorMessage = 'Auth failed';\n          throw new Error(errorMessage);\n        });\n      }\n    }).then(function (data) {\n      setError(\"You signed up!\");\n    }).catch(function (err) {\n      setError(\"Error, try again later...\");\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: classes.auth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, isLogin ? 'Login' : 'Sign Up'), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.control,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"Your Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    required: true,\n    ref: emailInputRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.control,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Your Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    required: true,\n    ref: passwordInputRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.actions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: classes.registerButton,\n    onClick: checkBeforeSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Create Account\"), isLoading && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 26\n    }\n  }, \" Loading ... \"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: classes.toggle,\n    onClick: switchAuthModeHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, isLogin ? 'Create new account' : 'Login with existing account')), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, error));\n};\nexport default Register;","map":{"version":3,"names":["useState","useRef","classes","Register","emailInputRef","passwordInputRef","error","setError","isLogin","setIsLogin","isLoading","setIsLoading","switchAuthModeHandler","prevState","validateEmail","email","match","checkBeforeSubmit","Event","enteredEmail","current","value","enteredPassword","valid","console","log","length","submitHandler","url","fetch","method","body","JSON","stringify","password","returnSecureToken","headers","then","res","ok","json","data","errorMessage","Error","catch","err","auth","control","actions","registerButton","toggle"],"sources":["C:/Users/benfainshtein/Desktop/web2Project/front/src/components/Register/Register.js"],"sourcesContent":["import { useState , useRef } from 'react';\r\n\r\nimport classes from './Register.module.css';\r\n\r\nconst Register = () => {\r\n \r\n  const emailInputRef = useRef();\r\n  const passwordInputRef = useRef(); \r\n   const [error, setError] = useState(\"\");\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const switchAuthModeHandler = () => {\r\n    setIsLogin((prevState) => !prevState);\r\n  };\r\n\r\n  const validateEmail = (email) => {\r\n    return email.match(\r\n      /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n    );\r\n  };\r\n\r\nconst checkBeforeSubmit = (Event) =>{\r\n    const enteredEmail = emailInputRef.current.value;\r\n    const enteredPassword = passwordInputRef.current.value;\r\n   var valid = true;\r\n  console.log(enteredPassword.length);\r\n\r\n\r\nif(!validateEmail(enteredEmail)){\r\n    setError(\"Email is not valid\");\r\n    valid = false;\r\n}else  if(enteredPassword == \"\"){\r\n    setError(\"Fill the password please!\")\r\n        valid = false;\r\n   }else  if (enteredPassword.length<8) {\r\n    setError(\"Password must be with more then 8 characters\")\r\n    valid = false;\r\n}\r\n\r\n if(valid== true){submitHandler()}\r\n \r\n};\r\n\r\n  const submitHandler = () =>{\r\n  \r\n\r\nconst enteredEmail = emailInputRef.current.value;\r\nconst enteredPassword = passwordInputRef.current.value;\r\n\r\n// optional add validation \r\n\r\nsetIsLoading(true);\r\n\r\nlet url ; \r\n\r\n\r\n\r\n\r\n\r\n  url =  'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyC0Xs5gm4eJ2D3G5ia43sC-j7IQTYtj-pQ' ; \r\n \r\n\r\nfetch (url ,\r\n  {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n        email: enteredEmail,\r\n        password: enteredPassword,\r\n        returnSecureToken: true\r\n    }),\r\n    headers:{\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then ( res => {\r\n    setIsLoading(false);\r\n    if(res.ok) {\r\n     return res.json();\r\n    }else{\r\n      return res.json ().then((data) => {\r\n       let errorMessage = 'Auth failed';\r\n    \r\n       throw new Error( errorMessage);\r\n      });\r\n    }\r\n  }).then( (data) => {\r\n    setError(\"You signed up!\")\r\n  }).catch (err => {\r\n    setError(\"Error, try again later...\")\r\n  });\r\n}\r\n\r\n  return (\r\n    <section className={classes.auth}>\r\n      <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\r\n     \r\n        <div className={classes.control}>\r\n          <label htmlFor='email'>Your Email</label>\r\n          <input type='email' id='email' required ref = {emailInputRef}/>\r\n        </div>\r\n        <div className={classes.control}>\r\n          <label htmlFor='password'>Your Password</label>\r\n          <input type='password' id='password' required ref = {passwordInputRef} />\r\n        </div>\r\n        <div className={classes.actions}>\r\n          <button className={classes.registerButton} onClick={checkBeforeSubmit}>Create Account</button>\r\n          {\r\n            isLoading && <p> Loading ... </p>\r\n          }\r\n          <button\r\n            type='button'\r\n            className={classes.toggle}\r\n            onClick={switchAuthModeHandler}\r\n          >\r\n            {isLogin ? 'Create new account' : 'Login with existing account'}\r\n          </button>\r\n        </div>\r\n\r\n      <h1>{error}</h1>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}